<div class="bg-white mt-4 w-full font-exo">
  @if(event){
  <ng-container>
    <div class="p-4 flex flex-col flex-1 w-1/2 mx-auto shadow-2xl">
      <!-- Images Carousel -->
      <app-carousel [images]="event.images"></app-carousel>

      <!-- Event Name -->
      <p
        class="text-xl font-semibold mb-6 text-blue-700 mt-4 cursor-pointer w-fit hover:underline"
      >
        {{ event.name }}
      </p>

      <!-- To show event category tags -->
      <div class="flex flex-wrap gap-2 mb-4">
        <ng-container *ngFor="let category of event.categories">
          <span
            class="bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-full"
          >
            {{ category }}
          </span>
        </ng-container>
      </div>

      <p class="text-gray-600 w-full">
        <strong>Description: </strong>
        {{ event.eventDescription || "No description available" }}
      </p>

      <div class="flex-1">
        <p class="text-gray-600">
          <strong>Date:</strong> {{ event.dateAndTime | date : "longDate" }}
        </p>
        <p class="text-gray-600">
          <strong>Time: </strong>
          {{ getFormattedTimeWithTimezone(event.dateAndTime) }}
        </p>

        <!-- Venue Details in a Card-like Format -->
        <div class="bg-gray-100 p-4 rounded-lg mt-4">
          <p class="text-lg font-semibold text-blue-600 mb-2">
            Venue Details
          </p>
          <p class="text-gray-800">
            <strong>Name:</strong>
            {{ event.venue.name || "Venue name unavailable" }}
          </p>
          <p class="text-gray-800">
            <strong>Address:</strong>
            {{ event.venue.address || "Address unavailable" }}
          </p>
          <p class="text-gray-800">
            <strong>State:</strong>
            {{ event.venue.state || "State unavailable" }}
          </p>
          <p class="text-gray-800">
            <strong>Capacity:</strong>
            {{ event.venue.capacity || "Capacity not specified" }} people
          </p>
        </div>
      </div>

      <!-- Event Ticket Types -->
      <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
        <ng-container *ngFor="let ticket of event.ticketTypes">
          <!-- Ticket Card -->
          <div
            class="relative p-4 border border-gray-200 rounded-lg shadow-lg w-full flex flex-col flex-1 justify-between"
          >
            <!-- Sold Out Overlay -->
            <div
              *ngIf="ticket.quantityAvailable === 0"
              class="absolute inset-0 bg-red-600 text-white font-bold text-lg flex justify-center items-center opacity-85 rounded-lg cursor-not-allowed"
              style="z-index: 10"
            >
              Sold Out
            </div>

            <!-- Ticket Info -->
            <div [class.opacity-50]="ticket.quantityAvailable === 0">
              <p class="text-xl font-semibold mb-2">{{ ticket.type }}</p>
              <p class="text-gray-700">
                <strong>Price:</strong> â‚¹ {{ ticket.price }}
              </p>
              <p class="text-gray-700">
                <strong>Available:</strong> {{ ticket.quantityAvailable }}
              </p>
            </div>
            <!-- Book Now Button -->
            <!-- (click)="bookEvent(event.eventID, ticket.type)" -->
            <button
              class="bg-blue-500 text-white px-4 py-2 rounded mt-4 w-full hover:bg-blue-600"
              [disabled]="ticket.quantityAvailable === 0"
              (click)="bookEvent(ticket.ticketTypeID)"
            >
              Book Now
            </button>
          </div>
        </ng-container>
      </div>

      <!-- Organizer Details -->
      <div class="bg-gray-100 p-4 rounded-lg mt-4">
        <p class="text-lg font-semibold text-blue-600 mb-2">
          Organizer Information
        </p>
        <p class="text-gray-800">
          <strong>Name:</strong>
          {{ event.organizer.name || "Organizer name unavailable" }}
        </p>
        <p class="text-gray-800">
          <strong>Email:</strong>
          {{ event.organizer.contactEmail || "Email unavailable" }}
        </p>
        <p class="text-gray-800">
          <strong>Phone:</strong>
          {{ event.organizer.phoneNumber || "Phone number unavailable" }}
        </p>
      </div>
    </div>
  </ng-container>
  } @else {
  <h1>Event not found</h1>
  }
</div>
